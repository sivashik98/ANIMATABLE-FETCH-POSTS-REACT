(this["webpackJsonplist-posts"]=this["webpackJsonplist-posts"]||[]).push([[0],{103:function(t,e,n){},115:function(t,e,n){},120:function(t,e,n){"use strict";n.r(e);var c=n(4),r=n(0),i=n.n(r),a=n(18),o=n.n(a),s=(n(67),n(27)),u=n(35);s.b.add(u.b,u.c,u.a);var l=n(52),j=n(16),d=n(61),b=n(30),O=(n(75),n(22)),p=n.n(O),f=n(43),x=(n(87),n(10)),v=n(42),h=(n(88),n(56)),g=n.n(h),y=function(t){var e=t.size,n=t.loading,r=t.color;return Object(c.jsx)(g.a,{loading:n,size:e||10,color:r||"#fff"})},m=function(t,e){for(var n="",c=0;c<e;c++)n+=t[c];return"".concat(n," .....")},P="POSTS/FETCH_POST",C="POSTS/FETCH_POST_SUCCESS",N="POSTS/FETCH_POST_FAIL",S="POSTS/REORDER_POSTS",T="POSTS/TOGGLE_LIKE_POST",k="POSTS/DELETE_POST",w="APP/DISABLE_INTERACTION",E="APP/ENABLE_INTERACTION",A="APP/SHOW_WARNING",I="APP/HIDE_WARNING",F="TOPIC/CREATE_TOPIC",R=function(){return{type:N}},_=function(t){var e,n=t.item,r=void 0!==n&&n,i=t.style,a=t.provided,o=Object(j.d)((function(t){return t.posts.present})).isFetching,s=Object(j.c)(),u=r&&(r.title.length>75?m(r.title,75):r.title);return o&&!r?Object(c.jsx)("div",{style:i,children:Object(c.jsx)("div",Object(x.a)(Object(x.a)(Object(x.a)({ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{className:"postLoader",children:Object(c.jsx)(y,{loading:o})}))}):r?Object(c.jsx)("div",{style:i,children:Object(c.jsxs)("div",Object(x.a)(Object(x.a)(Object(x.a)({ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{className:"post",children:[Object(c.jsxs)("div",{className:"postWrapSvg",children:[Object(c.jsx)(v.a,{icon:"thumbs-up",className:"postSvg postSvgLike",style:{color:r.liked&&"darkred"},onClick:(e=r.id,function(){s(function(t){return{type:T,payload:t}}(e))})}),Object(c.jsx)(v.a,{icon:"trash",className:"postSvg postSvgTrash",onClick:function(t){return function(){s(function(t){return{type:k,payload:t}}(t))}}(r.id)})]}),Object(c.jsx)("a",{href:r.url,className:"postLink",target:"blank",children:u})]}))}):Object(c.jsx)("div",{style:i,children:Object(c.jsx)("div",Object(x.a)(Object(x.a)({ref:a.innerRef},a.draggableProps),a.dragHandleProps))})},L=function(t){return function(e){var n=e.key,r=e.index,i=e.style,a=t[r];return Object(c.jsx)(b.b,{draggableId:"".concat(r),index:r,children:function(t){return Object(c.jsx)(_,{item:a,style:i,provided:t},n)}},r)}},H=function(t){var e=t.list,n=Object(j.c)(),r=function(t){return function(e){if(e){var n=o.a.findDOMNode(e);n instanceof HTMLElement&&t.innerRef(n)}}};return Object(c.jsxs)("div",{className:"listPosts",children:[Object(c.jsxs)("div",{className:"listPostsControl",children:[Object(c.jsx)("div",{className:"button listPostsControlBtn",onClick:function(){n(O.ActionCreators.undo())},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),Object(c.jsx)("div",{className:"button listPostsControlBtn",onClick:function(){n(O.ActionCreators.redo())},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c"})]}),Object(c.jsx)(b.c,{droppableId:"droppable",mode:"virtual",renderClone:function(t,n,r){var i=e[r.source.index];return Object(c.jsx)(_,{item:i,provided:t})},children:function(t){return Object(c.jsx)(f.a,{children:function(n){var i=n.width,a=n.height;return Object(c.jsx)(f.b,{ref:r(t),height:a,width:i,rowCount:e.length+1,rowHeight:65,rowRenderer:L(e),className:"listPostsForm"})}})}})]})},D=(n(94),function(t){var e=t.title,n=t.onClick,r=e.length>10?m(e,10):e;return Object(c.jsx)("div",{className:"topic",onClick:function(){n&&n()},children:Object(c.jsx)("h3",{children:r})})}),M=n(57),W=n.n(M),B=(n(103),function(t){var e=t.warning,n=t.onClick,r=function(){n&&n()};return Object(c.jsx)(W.a,{isOpen:!!e,onRequestClose:r,ariaHideApp:!1,className:"warningModal",children:Object(c.jsxs)("div",{className:"warningModalWrap",children:[Object(c.jsx)("p",{className:"warningModalText",children:e}),Object(c.jsx)("div",{className:"button",onClick:r,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})})}),G=n(34),z=n(58),J=n.n(z),K=(n(115),function(){return{type:E}}),U=function(t){return{type:A,payload:t}},q=function(t){var e=t.topics,n=Object(r.useState)(""),i=Object(G.a)(n,2),a=i[0],o=i[1],s=Object(j.c)(),u=function(){var t={id:J()(),title:a.trim()},n=e.some((function(e){return e.title.toLowerCase()===t.title.toLowerCase()}));if(console.log(t,n),n){s(U("\u0422\u0430\u043a\u043e\u0439 \u0442\u043e\u043f\u0438\u043a \u0443\u0436\u0435 \u0435\u0441\u0442\u044c!"))}a.trim()&&!n&&(s(function(t){return{type:F,payload:t}}(t)),o(""))};return Object(c.jsxs)("div",{className:"topicsForm",children:[Object(c.jsx)("div",{className:"button",onClick:u,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0442\u043e\u043f\u0438\u043a"}),Object(c.jsx)("div",{className:"topicsFormField",children:Object(c.jsx)("input",{type:"text",className:"topicsFormInput",onChange:function(t){o(t.target.value)},value:a,onKeyPress:function(t){"Enter"===t.key&&a.trim()&&u()}})})]})},Q=n(26),V=function(){var t=Object(j.d)((function(t){return t.app})),e=t.interaction,n=t.warning,r=Object(j.d)((function(t){return t.posts.present})).posts,i=Object(j.d)((function(t){return t.topics})).topics,a=Object(j.c)(),o=function(t){return function(){e&&a(function(t,e){return{type:P,payload:{topic:t,existedPosts:e}}}(t,r))}};return Object(c.jsxs)(c.Fragment,{children:[i.map((function(t){return Object(c.jsx)(D,{title:t.title,onClick:o(t)},t.id)})),Object(c.jsxs)("div",{className:"appWrap",children:[Object(c.jsx)(b.a,{onDragEnd:function(t){if(t.destination&&t.source.index!==t.destination.index){var e=function(t,e,n){var c=Object(Q.a)(t),r=c.splice(e,1),i=Object(G.a)(r,1)[0];return c.splice(n,0,i),c}(r,t.source.index,t.destination.index);a(function(t){return{type:S,payload:t}}(e))}},children:Object(c.jsx)(H,{list:r})}),Object(c.jsx)(q,{topics:i})]}),Object(c.jsx)(B,{warning:n,onClick:function(){a({type:I})}})]})},X=n(15),Y=n(44),Z=n(59),$=n.n(Z),tt={posts:[],isFetching:!1},et={liked:!1},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0,n=t.posts;return e.type===P?Object(x.a)(Object(x.a)({},t),{},{isFetching:!0}):e.type===C?Object(x.a)(Object(x.a)({},t),{},{posts:[].concat(Object(Q.a)(n),[Object(x.a)(Object(x.a)({},e.payload),et)]),isFetching:!1}):e.type===N?Object(x.a)(Object(x.a)({},t),{},{isFetching:!1}):e.type===S?Object(x.a)(Object(x.a)({},t),{},{posts:e.payload}):e.type===T?Object(x.a)(Object(x.a)({},t),{},{posts:n.map((function(t){return t.id===e.payload?Object(x.a)(Object(x.a)({},t),{},{liked:!t.liked}):t}))}):e.type===k?Object(x.a)(Object(x.a)({},t),{},{posts:n.filter((function(t){return t.id!==e.payload}))}):t},ct={interaction:!0,warning:null},rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=arguments.length>1?arguments[1]:void 0;return e.type===w?Object(x.a)(Object(x.a)({},t),{},{interaction:!1}):e.type===E?Object(x.a)(Object(x.a)({},t),{},{interaction:!0}):e.type===A?Object(x.a)(Object(x.a)({},t),{},{warning:e.payload}):e.type===I?Object(x.a)(Object(x.a)({},t),{},{warning:null}):t},it={topics:[]},at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,e=arguments.length>1?arguments[1]:void 0,n=t.topics;return e.type===F?Object(x.a)(Object(x.a)({},t),{},{topics:[].concat(Object(Q.a)(n),[e.payload])}):t},ot={limit:30,undoType:O.ActionTypes.UNDO,redoType:O.ActionTypes.REDO,filter:Object(O.includeAction)([C,S,k,T])},st=Object(X.c)({app:rt,posts:p()(nt,ot),topics:at}),ut={key:"root",storage:$.a},lt=Object(Y.a)(ut,st),jt=function(t,e){var n=Object(X.e)(lt,t,Object(X.a)(e));return{store:n,persistent:Object(Y.b)(n)}},dt=n(23),bt=n.n(dt),Ot=n(19),pt=n(60),ft=n.n(pt),xt=bt.a.mark(yt),vt=bt.a.mark(mt),ht=function(t,e){return t.filter((function(t){return e.every((function(e){return e.id!==t.id}))}))[0]},gt=function(t){return function(){return ft()("".concat("https://www.reddit.com/r/").concat(t.title,".json")).then((function(t){return t.json()}))}};function yt(t){var e,n,c,r;return bt.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.payload,i.prev=1,i.next=4,Object(Ot.c)({type:w});case 4:return i.next=6,Object(Ot.b)(gt(e.topic));case 6:if(n=i.sent,c=n.data.children.map((function(t){return t.data})),!(r=ht(c,e.existedPosts))){i.next=14;break}return i.next=12,Object(Ot.c)({type:C,payload:r});case 12:i.next=19;break;case 14:return"\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0441\u0442\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c",i.next=17,Object(Ot.c)(U("\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0441\u0442\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c"));case 17:return i.next=19,Object(Ot.c)(R());case 19:return i.next=21,Object(Ot.c)(K());case 21:i.next=32;break;case 23:return i.prev=23,i.t0=i.catch(1),"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e\u0441\u0442\u043e\u0432",i.next=28,Object(Ot.c)(U("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e\u0441\u0442\u043e\u0432"));case 28:return i.next=30,Object(Ot.c)(R());case 30:return i.next=32,Object(Ot.c)(K());case 32:case"end":return i.stop()}}),xt,null,[[1,23]])}function mt(){return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ot.d)(P,yt);case 2:case"end":return t.stop()}}),vt)}var Pt=bt.a.mark(Ct);function Ct(){return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ot.a)([mt()]);case 2:case"end":return t.stop()}}),Pt)}var Nt=Object(d.a)(),St=jt({},Nt),Tt=St.store,kt=St.persistent;Nt.run(Ct);var wt=function(){return Object(c.jsx)(j.a,{store:Tt,children:Object(c.jsx)(l.a,{loading:Object(c.jsx)(y,{loading:!0,size:20}),persistor:kt,children:Object(c.jsx)(V,{})})})};o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(wt,{})}),document.getElementById("root"))},67:function(t,e,n){},75:function(t,e,n){},87:function(t,e,n){},88:function(t,e,n){},94:function(t,e,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.1a03de7f.chunk.js.map